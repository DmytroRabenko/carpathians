const data = {
  imageBank : [
    ['./assets/image_bank/image1.jpg', './assets/smallImageBank/image1.jpg'],
    ['./assets/image_bank/image2.jpg', './assets/smallImageBank/image2.jpg'],
    ['./assets/image_bank/image3.jpg', './assets/smallImageBank/image3.jpg'],
    ['./assets/image_bank/image4.jpg', './assets/smallImageBank/image4.jpg'],
    ['./assets/image_bank/image5.jpg', './assets/smallImageBank/image5.jpg'],
    ['./assets/image_bank/image6.jpg', './assets/smallImageBank/image6.jpg'],
    ['./assets/image_bank/image7.jpg', './assets/smallImageBank/image7.jpg'],
    ['./assets/image_bank/image8.jpg', './assets/smallImageBank/image8.jpg'],
    ['./assets/image_bank/image9.jpg', './assets/smallImageBank/image9.jpg'],
    ['./assets/image_bank/image10.jpg', './assets/smallImageBank/image10.jpg'],
    ['./assets/image_bank/image11.jpg', './assets/smallImageBank/image11.jpg'],
    ['./assets/image_bank/image12.jpg', './assets/smallImageBank/image12.jpg'],
    ['./assets/image_bank/image13.jpg', './assets/smallImageBank/image13.jpg'],
    ['./assets/image_bank/image14.jpg', './assets/smallImageBank/image14.jpg'],
    ['./assets/image_bank/image15.jpg', './assets/smallImageBank/image15.jpg'],
    ['./assets/image_bank/image16.jpg', './assets/smallImageBank/image16.jpg'],
    ['./assets/image_bank/image17.jpg', './assets/smallImageBank/image17.jpg'],
    ['./assets/image_bank/image18.jpg', './assets/smallImageBank/image18.jpg'],
    ['./assets/image_bank/image19.jpg', './assets/smallImageBank/image19.jpg'],
    ['./assets/image_bank/image20.jpg', './assets/smallImageBank/image20.jpg'],
    ['./assets/image_bank/image21.jpg', './assets/smallImageBank/image21.jpg'],
    ['./assets/image_bank/image22.jpg', './assets/smallImageBank/image22.jpg'],
    ['./assets/image_bank/image23.jpg', './assets/smallImageBank/image23.jpg'],
    ['./assets/image_bank/image24.jpg', './assets/smallImageBank/image24.jpg'],
    ['./assets/image_bank/image25.jpg', './assets/smallImageBank/image25.jpg'],
    ['./assets/image_bank/image26.jpg', './assets/smallImageBank/image26.jpg'],
    ['./assets/image_bank/image27.jpg', './assets/smallImageBank/image27.jpg'],
    ['./assets/image_bank/image28.jpg', './assets/smallImageBank/image28.jpg'],
    ['./assets/image_bank/image29.jpg', './assets/smallImageBank/image29.jpg'],
    ['./assets/image_bank/image30.jpg', './assets/smallImageBank/image30.jpg'],
    ['./assets/image_bank/image31.jpg', './assets/smallImageBank/image31.jpg'],
    ['./assets/image_bank/image32.jpg', './assets/smallImageBank/image32.jpg'],
    ['./assets/image_bank/image33.jpg', './assets/smallImageBank/image33.jpg'],
    ['./assets/image_bank/image34.jpg', './assets/smallImageBank/image34.jpg'],
    ['./assets/image_bank/image35.jpg', './assets/smallImageBank/image35.jpg'],
    ['./assets/image_bank/image36.jpg', './assets/smallImageBank/image36.jpg'],
    ['./assets/image_bank/image37.jpg', './assets/smallImageBank/image37.jpg'],
    ['./assets/image_bank/image38.jpg', './assets/smallImageBank/image38.jpg'],
    ['./assets/image_bank/image39.jpg', './assets/smallImageBank/image39.jpg'],
    ['./assets/image_bank/image40.jpg', './assets/smallImageBank/image40.jpg'],
    ['./assets/image_bank/image41.jpg', './assets/smallImageBank/image41.jpg'],
    ['./assets/image_bank/image42.jpg', './assets/smallImageBank/image42.jpg'],
    ['./assets/image_bank/image43.jpg', './assets/smallImageBank/image43.jpg'],
    ['./assets/image_bank/image44.jpg', './assets/smallImageBank/image44.jpg'],
    ['./assets/image_bank/image45.jpg', './assets/smallImageBank/image45.jpg'],
    ['./assets/image_bank/image46.jpg', './assets/smallImageBank/image46.jpg'],
    ['./assets/image_bank/image47.jpg', './assets/smallImageBank/image47.jpg'],
    ['./assets/image_bank/image48.jpg', './assets/smallImageBank/image48.jpg']
  ],
  visitPlaces : [
    {
      title: 'Bukovel',
      description: 'Bukovel is the largest and most touristic ski resort in Ukraine, located at an altitude of 920 meters (3,018 feet) above sea level. It has a well-developed infrastructure and magnificent mountain views that make you feel as if in the winter wonderland. In summer, people come here for wellness and SPA activities. Meanwhile, from the beginning of November till April, the village is covered in snow and constitutes a great destination for winter sports and leisure.',
      url: './assets/visit_place/bukovel.jpg',
      href: 'https://uk.wikipedia.org/wiki/%D0%91%D1%83%D0%BA%D0%BE%D0%B2%D0%B5%D0%BB%D1%8C'
    },
    {
      title: 'Dzembronya',
      description: 'There are only 250 people, who live in Dzembronya. Its length is only 10 kilometers (6.2 miles). However, this tiny village is considered to be the most mountainous settlement in Ukraine — 898 meters (2,946 feet) high. The residents of the village have preserved the ancient Ukrainian customs and traditions, which one can observe all year round. Also, Dzembronya attracts tourists from different corners of the world because of its incredibly beautiful nature and dizzying fresh air. Many hiking trails to the Chornohora ridge start exactly from here.',
      url: './assets/visit_place/dzembronia.jpeg',
      href: 'https://uk.wikipedia.org/wiki/%D0%94%D0%B7%D0%B5%D0%BC%D0%B1%D1%80%D0%BE%D0%BD%D1%8F_(%D1%81%D0%B5%D0%BB%D0%BE)'
    },
    {
      title: 'Valley of daffodils',
      description: 'If you want to capture the fascinating daffodils in bloom, come to the Carpathians in May. It is the only place in the world, where the flower grows at an altitude of 200 meters (656 feet). All other fields, for instance, ones in the Alps are located at more than 2,000 meters (6,561 feet) above sea level. The valley is a part of the Carpathian Biosphere Reserve since 1992, therefore, it is protected by UNESCO. Every year, tens of thousands of travellers come to this area to spot the unique and inspiring phenomena.',
      url: './assets/visit_place/daffodils.jpg',
      href: 'https://discover.ua/en/locations/dolina-narcissov'
    },
    {
      title: 'Synevir Lake',
      description: 'Synevir Lake is a real natural wonder of Ukraine. It was formed about 10 thousand years ago as a result of the powerful rock shifts. Locals call the lake the Sea Eye because a small island in the middle resembles an eye pupil. It is associated with many legends and mystical stories. Moreover, a lot of people believe it to be a place of power and come here to gain strength and energy. Within a short distance there`s a village of the same name (Synevir). Tourists can rent a cottage and stay as long as they like to recover from the crazy pace of life.',
      url: './assets/visit_place/sunevir.webp',
      href: 'https://en.wikipedia.org/wiki/Synevyr'
    },
    {
      title: 'Palanok Castle',
      description: 'Palanok Castle occupies an old 68-meter-high (223 feet) hill, that many years ago used to be a volcano. The building itself was constructed in the best traditions of medieval defence architecture. Although there`s no exact date when the fortress was built, the first mention of it traces back to the 11th century. Since that time, it has changed dozens of owners and rulers and survived many battles and wars. Nowadays, it is the highest point in the Mukachevo town and a must-visit spot for everyone.',
      url: './assets/visit_place/palanok.jpg',
      href: 'https://en.wikipedia.org/wiki/Palanok_Castle'
    },
    {
      title: 'Shenborn Palace',
      description: 'Among the amazing architectural sights of Western Ukraine, one can distinguish a fairy tale Shenborn Palace. It is preserved almost in its original form both inside and outside. Special attention should be paid to the peculiar architecture of the castle. According to the astronomical principles, each of the elements of the façade has a special symbolic interpretation. Thus, there are exactly 365 windows in the castle, all representing the days of the year. In the case of a leap year, Shenborn Palace has another immured window.',
      url: './assets/visit_place/shenborn.jpeg',
      href: 'https://uk.wikipedia.org/wiki/%D0%9F%D0%B0%D0%BB%D0%B0%D1%86_%D0%B3%D1%80%D0%B0%D1%84%D1%96%D0%B2_%D0%A8%D0%B5%D0%BD%D0%B1%D0%BE%D1%80%D0%BD%D1%96%D0%B2'
    },
    {
      title: 'Abandoned observatory',
      description: 'An abandoned observatory on the top of the Pip Ivan Mountain is also known as White Elephant (Biały Słoń). It has its name because in winter the building gets covered in snow from bottom to top and from a far distance resembles an animal. The observatory itself was built in 1938 by the Polish and served as an astronomical and meteorological station. But when the Second World War started, it was left and currently remains abandoned. This is what attracts travellers.',
      url: './assets/visit_place/observatory.jpg',
      href: 'https://green-ukraine.com/the-observatory-pip-ivan'
    },
    {
      title: 'Hoverla',
      description: 'Hoverla is definitely the best destination for those who are in love with extreme activities and hiking. It is the highest mountain of the Ukrainian Carpathians, with a height of 2,061 meters (6761 feet). The first tourist route to Hoverla was laid in the 1880s. Now, thousands of tourists make their way to the very peak. If the sky is clear, from one side, one can see the city of Ivano-Frankivsk, which is 151 km (94 miles) away. From the other side, the view opens on the Romanian city of Sighetu Marmației.',
      url: './assets/visit_place/hoverla.jpeg',
      href: 'https://en.wikipedia.org/wiki/Hoverla'
    },
    {
      title: 'Shypit Waterfall',
      description: 'Shypit Waterfall is among the most visited attractions in the Ukrainian Carpathians. A favourite place of tent camps and tourist sites. It is located in the mountains on the outskirts of the village of Pylypets (a ski resort with the longest trails in the country). Its received the name “real miracle of nature” due to the loud noise heard from afar that sounds like a whisper (shypit in Ukrainian). The waterfall is especially beautiful in the spring, during the melting of snow in winter or in the autumn, during the rainy season.',
      url: './assets/visit_place/shypit.jpg',
      href: 'https://en.wikipedia.org/wiki/Shypit'
    },
    {
      title: 'Brebeneskul Lake',
      description: 'High in the valleys of the Carpathian Mountains, one can see the highest mountain lake in Ukraine that lies at an altitude of 1,801 meters (5,908 feet). Therefore, the water in the Brebeneskul Lake is always freezing cold even during the hot summer. Tourists never swim in it and rarely stay nearby; the area has a glacial origin. Brebeneskul is nothing but a picturesque spot to take great photos. Nevertheless, it is here one can truly appreciate the beauty of virgin nature.',
      url: './assets/visit_place/berbeneskul.jpg',
      href: 'https://en.wikipedia.org/wiki/Lake_Brebeneskul'
    }
  ]
}



//  for swipe, before/next image
let touchSwipeStartX = 0;//point start swipe
const touchSwipeThreshold = 30;//swipe checkpoint

const fnForTouchStart = (e) => {
  touchStartX = e.touches[0].clientX;
}
const fnForTouchEnd = (before, next) => {
  let touchEndX = event.changedTouches[0].clientX;
  const deltaX = touchEndX - touchStartX;

  if (Math.abs(deltaX) >= touchSwipeThreshold) {
    if (deltaX > 0) {
      before();
    } else {
      next();
    }
  }
}



//mob menu
const mobMenuIcon = document.querySelector('.mob_nav');

if(mobMenuIcon){
  const nav = document.querySelector('.nav');
  const links = document.querySelectorAll('.nav-link');
  const navBar = document.querySelector('.navbar');

  const changeMobMenuVisible = () => {
    document.body.classList.toggle('_noScroll');
    nav.classList.toggle('_active');
    mobMenuIcon.classList.toggle('_active');
  }

  mobMenuIcon.addEventListener('click', changeMobMenuVisible);
  links.forEach((link) => {
    link.addEventListener('click', changeMobMenuVisible)
  })

  // click outside the nav
  const handleClickOutside = (event) => {
    if (!navBar.contains(event.target)) {
        changeMobMenuVisible()
    }
  }
  nav.addEventListener('click', handleClickOutside);
};


//add class on scroll
const addClassOnScroll = (elementTag, scrollThreshold, className) => {
  const element = document.querySelector(elementTag);

  if(element){
    window.addEventListener('scroll', function() {
      // Визначаємо відстань, на яку була прокручена сторінка
      const scrolledPixels = window.scrollY;
      // Якщо відстань прокручування більше або дорівнює заданому порогу (scrollThreshold)
      if (scrolledPixels > scrollThreshold) {
          // Додаємо клас до елементу
          element.classList.add(className);
      } else {
          // Видаляємо клас, якщо відстань менше порогу
          element.classList.remove(className);
      }
    });
    if(element.id === 'up_button'){
      element.onclick = () => {
        window.scrollTo({
          top: 0,
          left: 0,
          behavior: 'smooth',
        });
      };
    }
  }
}  
addClassOnScroll('.header_content', 1, 'header_active');
addClassOnScroll('.mob_nav', 1, '_act');
addClassOnScroll('.up_button', 1000, 'hide');


//animation
const animateElements = document.querySelectorAll('._animate');
if (animateElements.length > 0) {
    const animeOnScroll = () => {
        for (let index = 0; index < animateElements.length; index++) {
            const animateElement = animateElements[index];
            const animateElementHeight = animateElement.offsetHeight;
            const animateElementOffset = offset(animateElement).top;
            const animateStart = 4;

            let animItemPoint = window.innerHeight - animateElementHeight / animateStart;
            if (animateElementHeight > window.innerHeight) {
                animItemPoint = window.innerHeight - window.innerHeight / animateStart;
            }

            if ((pageYOffset > animateElementOffset - animItemPoint) && pageYOffset < (animateElementOffset + animateElementHeight)){
                animateElement.classList.add('_active');
            } else {
              if(!animateElement.classList.contains('_one_animate')){
                animateElement.classList.remove('_active');
              }
              
            }
        }
    };
    const offset = (el) => {
        const rect = el.getBoundingClientRect();
        const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        return { top: rect.top + scrollTop, left: rect.left + scrollLeft };
    };
    window.addEventListener('scroll', animeOnScroll);
    setTimeout(animeOnScroll, 1000)
}



//  Must visit spots slider
let currentIndex = 0;
const gallery = document.querySelector('.places .gallery');
const photo = document.querySelector('.places .photo');
const currentPhoto = document.createElement('img');
photo.append(currentPhoto);
const previousSlideBtn = document.querySelector('.previous_slide');
const nextSlideBtn = document.querySelector('.next_slide');


const previousSlider = () => {
  if(currentIndex > 1){
    showActivePlace(currentIndex -= 1);
  }
  else{
    showActivePlace(currentIndex = 9);
  }
}
const nextSlider = () => {
  if(currentIndex < 9){
    showActivePlace(currentIndex += 1);
  }
  else{
    showActivePlace(currentIndex = 1);
  }
}
const showActivePlace = () => {
  currentPhoto.src = data.visitPlaces[currentIndex].url;
  currentPhoto.alt = data.visitPlaces[currentIndex].title;
  document.querySelector('.places .h5').textContent = data.visitPlaces[currentIndex].title;
  document.querySelector('.places .description').textContent = data.visitPlaces[currentIndex].description; 
}
const showVisitPlaces = (data) => {
  data.forEach((el, i) => {
      const img_container = document.createElement('div');
      const galleryImg = document.createElement('img');
      galleryImg.classList.add('gallery_img');
      galleryImg.src = `${el.url}`;
      galleryImg.alt = el.title;
      gallery.append(img_container);
      img_container.append(galleryImg);
      galleryImg.addEventListener('click', () => {
        currentIndex = i;
        document.querySelectorAll('.gallery_img').forEach((el) => {
          if(el.classList.contains('active')){
            el.classList.remove('active')
          }
        })
        galleryImg.classList.add('active');
        
        showActivePlace(currentIndex);
      })  
  })
showActivePlace(currentIndex);
}

previousSlideBtn.addEventListener('click', previousSlider);
nextSlideBtn.addEventListener('click', nextSlider);
//swipe
photo.addEventListener("touchstart", fnForTouchStart, {passive: true});
photo.addEventListener("touchend", () => {
  fnForTouchEnd(previousSlider, nextSlider), {passive: true}
});

showVisitPlaces(data.visitPlaces);




// Images bank
const imagesBank = document.querySelector(".images_wrapper");
const showMore = document.querySelector(".show_more");
const showLess = document.querySelector(".show_less");
let imagesToShow = 6;
let num = 1;

const displayImages = (startIndex, endIndex) => {
  if(endIndex <= data.imageBank.length){
    for (let i = startIndex; i < endIndex; i++) {
        const imgContainer = document.createElement('div');
        const galleryImg = document.createElement('img'); 
        galleryImg.classList.add('gallery_img');
        galleryImg.src = `${data.imageBank[i][1]}`;
        galleryImg.alt = `Carpathian montains imagebank img${num ++}`;
        imagesBank.append(imgContainer);
        imgContainer.append(galleryImg);
        galleryImg.addEventListener('click', () => {
          showFullscreenImageByIndex(i);
        })
    }
  }
}

// Функція для обробки кнопки "Показати менше зображень"
const showLessImages = () => {
    imagesToShow = 6;
    imagesBank.innerHTML = ""; // Очищуємо контейнер перед виведенням нових зображень
    displayImages(0, imagesToShow);
    showLess.classList.toggle('_hide');
    showMore.classList.toggle('_hide');
}
// Функція для обробки кнопки "Показати більше зображень"
const showMoreImages = () => {
  const newEndIndex = imagesToShow + 6;
  displayImages(imagesToShow, newEndIndex);
  imagesToShow = newEndIndex;
  if (imagesToShow == data.imageBank.length) {//перевірка, чи всі зображення вже показані
    showLess.classList.toggle('_hide');
    showMore.classList.toggle('_hide');
  }
}

showLess.addEventListener("click", showLessImages);
showMore.addEventListener("click", showMoreImages);

displayImages(0, imagesToShow);


//Відображення зображення в повноекранному режимі
let currentImageIndex = 0;
let isZoomed = false;
const fullscreenImageContainer = document.getElementById("fullscreenImageContainer");
const fullscreenImageContent = document.querySelector("#fullscreenImageContainer .content");
const fullscreenImage = document.getElementById("fullscreenImage");
const closeFullscreenBtn = document.getElementById("closeFullscreenBtn");
const prevImageBtn = document.querySelector('#prevImageBtn');
const nextImageBtn = document.querySelector('#nextImageBtn');

// Функція для відображення зображення в повноекранному режимі
const showFullscreenImageByIndex = (index) => {
  const imageSrc = data.imageBank[index][0];
  fullscreenImage.src = imageSrc;
  fullscreenImageContainer.classList.remove("_hide");
  currentImageIndex = index;
  document.body.classList.add('_noScroll');
}
//попереднє зображення
const showPrevImage = () => {
  if (currentImageIndex > 0) {
    showFullscreenImageByIndex(currentImageIndex - 1);
  }
}
//наступне зображення
const showNextImage = () => {
  if (currentImageIndex < data.imageBank.length - 1) {
    showFullscreenImageByIndex(currentImageIndex + 1);
  }
}
// Функція для зміни стану зуму
const toggleZoom = () => {
  isZoomed = !isZoomed;
  if (isZoomed) {
    fullscreenImage.classList.add("_zoomed");
    fullscreenImageContent.classList.add('_scroll')
  } else {
    fullscreenImage.classList.remove("_zoomed");
    fullscreenImageContent.classList.remove('_scroll')
  }
}

// Обробники подій
closeFullscreenBtn.addEventListener('click', () => {
  fullscreenImageContainer.classList.add("_hide");
  document.body.classList.remove('_noScroll');
})
fullscreenImage.addEventListener("dblclick", toggleZoom);
prevImageBtn.addEventListener("click", showPrevImage);
nextImageBtn.addEventListener("click", showNextImage);
//swipe
fullscreenImageContainer.addEventListener("touchstart", fnForTouchStart, {passive: true});
fullscreenImageContainer.addEventListener("touchend", () => {
  if(!isZoomed){
    fnForTouchEnd(showPrevImage, showNextImage);
  }
}, {passive: true});










const mainBlocks = document.querySelectorAll('.section8 .item_container');

// Додавання обробників подій для кожного блоку
mainBlocks.forEach((mainBlock) => {
    const clickableBlock = mainBlock.querySelector('.question');
    const hiddenInfo = mainBlock.querySelector('.answer');

    clickableBlock.addEventListener('click', function() {
        if (!hiddenInfo.classList.contains('_active')) {
            hiddenInfo.classList.add('_active');
            clickableBlock.classList.add('_active');
        } else {
            hiddenInfo.classList.remove('_active');
            clickableBlock.classList.remove('_active');
        }
    });
});






